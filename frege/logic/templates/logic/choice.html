{% extends "logic/question_base.html" %}

{% block pre_question %}בחר/י תשובה{% endblock %}

{% block question_content %}

  <div>

      <form id=cq>
      {% for choice in question.choice_set.all %}
          <input name="choice" value="{{ choice.id }}" type="radio"> {{ choice }}<br>
      {% endfor %}
        <div style="padding: 10px;margin-top: 20px;">
          <button class="btn btn-default btn-lg" id="answer" >אישור</button>
        </div>
      </form>
  </div>

<script>
$(document).ready(function(){
    $("#answer").click(function(){
        $("#answer").html("בודק...");
        $.post("{% url 'logic:chapter' number=chapter.number %}",
        {
            'choice':$('input[name=choice]:checked', '#cq').val(),
            'csrfmiddlewaretoken': '{{ csrf_token }}'
        },
        function(data, status){
            // data.length, status
            $.notify({
                icon: "glyphicon glyphicon-ok",
                message: "<strong>תשובה נכונה</strong>"
            },{
                type: "success",
                allow_dismiss: false,
                offset: 100,
                placement: {from: "bottom", align: "center"},
                animate: {enter: "animated fadeIn", exit: "animated fadeOut"},
                delay: 2000,
            });
            $("#answer").html("המשך");
            $("#answer").attr("onclick", "alert('hi')");
            $("#answer").attr("class", "btn btn-primary btn-lg");
        });
    });
});
</script>
{% endblock question_content %} 

<!-- TODO: visual spinner while loading: http://ux.stackexchange.com/questions/57599/when-should-i-use-ajax-to-submit-forms-vs-regular-page-submit -->
