function t(t){this.c=null,this.s1=null,this.s2=null,this.lit=e(t),this.an(this.lit)}function i(t){return t.toLowerCase()!=t.toUpperCase()}function r(t){return t==u||t==c||t==l||t==a}function n(t){return t==u||t==c||t==a}function e(t){return s(t).replace(/ /g,"")}function s(t){if("("==t.charAt(0)&&")"==t.charAt(t.length-1))for(var i=0,r=0;r<t.length;r++){var n=t.charAt(r);if(")"==n){if(i--,0==i)return r==t.length-1?s(t.slice(1,t.length-1)):t}else"("==n&&i++}return t}function o(i){try{var r=i.split(p);this.cclusion=new t(r[1]),this.premises=[];var n=r[0].split(",");if(n.length>1||""!=n[0])for(var e=0;e<n.length;e++)this.premises.push(new t(n[e]))}catch(t){throw new Error("טיעון לא תקין")}}function formalize(i,r){if(i.indexOf(p)>=0){if("Argument"!=r)throw new Error("ההצרנה צריכה להיות טענה");return new o(i)}if("Formula"!=r)throw new Error("ההצרנה צריכה להיות טיעון");return new t(i)}var h="~",u="·",c="∨",l="⊃",a="≡",p="∴";t.prototype.an=function(n){if(!this.ia()){for(var e="נוסחה לא תקינה",s=!1,o=0,f=0;f<n.length;f++){var u=n.charAt(f);if(")"==u)o--;else if("("==u){if(o++,f+1<n.length){var c=n.charAt(f+1);if(!i(c)&&c!=h&&"("!=c)throw new Error(e)}}else if(0==o){if(r(u)){var l=n.slice(0,f),a=n.slice(f+1);if(this.c=u,this.s1=new t(l),this.s2=new t(a),!this.s1.vs(l)||!this.s2.vs(a))throw new Error(e);return}u==h&&(s=!0)}else if(o<0)throw new Error("סוגריים לא מאוזנים")}if(0!==o)throw new Error("סוגריים לא מאוזנים");if(s){var p=n.slice(1);if(n.charAt(0)!==h)throw new Error(e);return this.c=h,void(this.s1=new t(p))}throw new Error(e)}},t.prototype.ia=function(){return 1==this.lit.length&&i(this.lit)},t.prototype.icn=function(){return this.c==u&&(this.s1.ing(this.s2)||this.s2.ing(this.s1))},t.prototype.ing=function(t){return this.c==h&&this.s1.eq(t)},t.prototype.eq=function(t){if(!t)return!1;if(this.lit==t.lit)return!0;if(this.ia())return!1;if(this.c==t.c){if(!r(this.c))return this.s1.eq(t.s1);if(this.s1.eq(t.s1)&&this.s2.eq(t.s2))return!0;if(n(this.c))return this.s1.eq(t.s2)&&this.s2.eq(t.s1)}return!1},t.prototype.cm=function(i,n){if(r(n))return f=new t("p"),f.c=n,f.s1=this,f.s2=i,f.lit=this.wr()+n+i.wr(),f},t.prototype.ng=function(){return f=new t("p"),f.c=h,f.s1=this,f.lit=h+this.wr(),f},t.prototype.wr=function(){return r(this.c)?"("+this.lit+")":this.lit},t.prototype.vs=function(t){return this.ia()||!r(this.c)||t!==s(t)},t.prototype.toString=function(){return this.lit};
